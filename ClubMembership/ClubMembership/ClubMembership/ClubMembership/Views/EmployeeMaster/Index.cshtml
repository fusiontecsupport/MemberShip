@model IEnumerable<ClubMembership.Models.EmployeeMaster>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="col-lg-12">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title"><i class="fa fa-bar-chart-o fa-fw"></i>  Employee Master <a class="btn btn-danger btn-sm pull-right" style="padding:3px;margin:0 0 10px" href="@Url.Action("Form", "EmployeeMaster")"><i class="fa fa-plus-square "></i> Add New </a> <div class="clearfix"> </div></h3>
        </div>

        <div>
            <div class="row">
                <div class="col-md-12">
                    <div class=" ">
                        <div class="panel-body">

                            <table id="example" class="display" cellspacing="0" width="100%">
                                <thead>
                                    <tr>
                                        <th>Code</th>
                                        <th>Name</th>
                                        <th>Contact Person</th>
                                        <th>Mobile No.</th>
                                        <th>Email Id</th>
                                        <th>Status</th>
                                        <th>ID</th>
                                        <th>Edit / Delete</th>
                                    </tr>
                                </thead>
                                <tfoot>
                                    <tr>
                                        <th>Code</th>
                                        <th>Name</th>
                                        <th>Contact Person</th>
                                        <th>Mobile No.</th>
                                        <th>Email Id</th>
                                        <th>Status</th>
                                        <th>ID</th>
                                        <th>Edit / Delete</th>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-toggle="modal" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="width:1200px;">
        <div class="modal-content  clearfix">


        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->

@section Scripts {

    <script type="text/javascript" class="init">

        var editor; // use a global for the submit and return data rendering in the examples
        $(document).ready(function() {

        //alert("3");

        table=$('#example').DataTable( {
            ajax: "@Url.Action("GetAjaxData", "EmployeeMaster")",
            //ajax: "../content/ajaxdata/Employee.txt",
		        columns: [
			        { data: "CATECODE" },
			        { data: "CATENAME" },
                    { data: "CATEPNAME"},
                    { data: "CATEPHN3" },
                    { data: "CATEMAIL" },
                    { data: "DISPSTATUS" },
                    { data: "CATEID", "visible": false },
			        {
			            mRender: function (data, type, row) {
			                @*return '<a href="@Url.Action("Form", "EmployeeMaster")/' + row["CATEID"] + '"   class="editor_edit btn btn-warning btn-sm" >EDIT</a>&nbsp;<a href="@Url.Action("SForm", "EmployeeMaster")/' + row["CATEID"] + '"   class="editor_edit btn btn-success btn-sm" data-toggle="modal" data-target="#myModal" >LINK</a>&nbsp;<a href="#" id="' + row["CATEID"] + '\" class="editor_remove btn btn-danger btn-sm" >DELETE</a>'*@
                            return '<a href="@Url.Action("Form", "EmployeeMaster")/' + row["CATEID"] + '"   class="editor_edit btn btn-warning btn-sm" ><i class="glyphicon glyphicon-pencil"></i></a>&nbsp;<a href="@Url.Action("LForm", "EmployeeMaster")/' + row["CATEID"]
                                + '"   class="editor_edit btn btn-success btn-sm hide" data-toggle="modal" data-target="#myModal" ><i class="fas fa-link"></i></i></a>&nbsp;<a href="#" id="' + row["CATEID"] + '\" class="editor_remove btn btn-danger btn-sm" ><i class="fa fa-trash-o"></i></a>'
			            }
			        }
            ]

        });

            //alert("4");
            //--------------Delete Record----------------//
            $(document).on("click", "a.editor_remove", function () {
                var r = confirm("Are you sure to delete this record ?");
                if (r == true) {
                    var idx = $(this).attr('id');
                    base = window.location.origin;
                    $.post(base + "/EmployeeMaster/Del",
                          {
                              id: idx, fld: ""
                          },
                        function (data, status) {
                            if (data == "Deleted Successfully ...")
                                location.replace(base + "/EmployeeMaster/Index");
                            else if (data == "") alert("You are not authorize to Delete..!");
                            else
                                alert(data);
                        });
                }
                return false;
            });//end


        //alert("5");

        $("#from").datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 3,
            dateFormat: 'dd-mm-yy',
            onClose: function (selectedDate) {
                $("#to").datepicker("option", "minDate", selectedDate);
            }
        });
        $("#to").datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 3,
            dateFormat: 'dd-mm-yy',
            onClose: function (selectedDate) {
                $("#from").datepicker("option", "maxDate", selectedDate);
            }
        });


        //alert("6");



} );



    </script>

}

