@using ClubMembership.Models;
@using ClubMembership.Data;
@model  ClubMembership.Models.ProductionROList
@{
    ViewBag.Title = "Production Release Order";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    :read-only {
    }

    /* ... so you might want to scope it */
    input:read-only,
    textarea:read-only,
    [contenteditable]:read-only {
        cursor: not-allowed;
    }

    .small {
        border: 0;
        width: 30px;
        max-width: 25%;
        background: none;
    }

    .stk {
        background: #808080;
        color: #fff;
    }

    .sm {
        width: 50px;
        max-width: 35%;
    }

    .batchno {
        padding-top: 10px;
        padding-bottom: 10px;
    }

    .spacer5 {
        height: 10px;
    }

    #aaa {
        height: 50px;
    }

    .select2-container {
        z-index: 99999;
    }
</style>

<div class="col-lg-12">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title"><i class="fa fa-bar-chart-o fa-fw"></i> @ViewBag.Title <div class="clearfix"> </div></h3>
        </div>


        <form action="@Url.Action("gstsavedata","ProductionReleaseOrder")" class="disableonsubmit" method="post" accept-charset="utf-8" id="materialrequestform" data-ng-controller="myController" name="materialrequestform" enctype="multipart/form-data" onsubmit="return validate();">
            <div class="panel-body fusion_frm">
                <div class="row">
                    <div class="col-md-12">
                        <div class="col-lg-2">
                            <div class="form-group">
                                <label>No</label>
                                @Html.TextBoxFor(model => Model.masterdata[0].ROID, new { @class = "form-control hide ROID", @id = "ROID" })
                                @Html.TextBoxFor(model => Model.masterdata[0].RONID, new { @class = "form-control RONID", @id = "RONID", @data_Val = false, @readonly = "readonly" })
                            </div>
                        </div>
                        <div class="col-lg-2">
                            <div class="form-group">
                                <label>Date</label>
                                @Html.TextBoxFor(model => Model.masterdata[0].RODATE, "{0:dd/MM/yyyy}", new { @class = "form-control RODATE datepicker", @id = "RODATE", @data_val = "false", @tabindex = "1" })
                            </div>
                        </div>
                        <div class="col-lg-2">
                            <div class="form-group">
                                <label>Status</label>
                                @Html.DropDownList("ROTYPE", null, "Select", new { @class = "form-control ROTYPE", @id = "ROTYPE", tabindex = "2" })
                            </div>
                        </div>

                    </div>


                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Client Name</label>
                                @Html.DropDownList("CLNTID", null, "Select Client", new { @class = "form-control custom-select  select2  CLNTID", @data_val = "true", @id = "CLNTID", @name = "CLNTID", @onchange = "GetClientDetail()", @tabindex = "4" })
                                @Html.TextBoxFor(model => Model.masterdata[0].RONAME, new { @class = "form-control RONAME hide", @id = "RONAME", tabindex = "16" })
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Supplier Name</label>
                                @Html.DropDownList("SUPLRID", null, "Select Supplier", new { @class = "form-control custom-select  select2  SUPLRID", @data_val = "true", @id = "SUPLRID", @name = "SUPLRID", @onchange= "GetSupplierDetail()", @tabindex = "3" })
                                @Html.TextBoxFor(model => Model.masterdata[0].ROSNAME, new { @class = "form-control ROSNAME hide", @id = "ROSNAME", tabindex = "16" })
                            </div>
                        </div>

                        <div class="hidden"><input type="text" id="s_chck" value="@ViewBag.CHECK" />  </div>
                    </div>


                    <div class="col-md-12">
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Subject</label>
                                @Html.TextAreaFor(model => Model.masterdata[0].RODESC, new { @class = "form-control RODESC", @id = "RODESC", @row="6", @col="6", tabindex = "16" })
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Narration</label>
                                @Html.TextAreaFor(model => Model.masterdata[0].RONARTN, new { @class = "form-control RONARTN", @id = "RONARTN", @row = "6", @col = "6", tabindex = "16" })
                            </div>
                        </div>
                    </div>

                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div class="panel panel-primary">
                            <div class="panel-heading navbar-inverse" id="aaa">
                                Production elease Order Details@*<a class="btn btn-sm btn-success navbar-right" id="add_detail" style="padding:3px;margin:0 0 0px"> Add New </a>*@
                            </div>
                            <div class="table-responsive" id="job_list_inner">
                                <input type="text" id="TDETAIL_IDX" value="0" name="TDETAIL_IDX[]" class="TDETAIL_IDX" style="display:none" />
                                <table class='table table-striped table-bordered bootstrap-datatable' id="TDETAIL">
                                    @{var m_id = 0;
                                        if (Model.masterdata != null)
                                        {
                                            m_id = Model.masterdata[0].ROID;
                                        }
                                    }
                                    <thead>
                                        <tr>
                                            <th>S.No</th>
                                            <th>Description</th>
                                            <th> <a class="btn btn-success btn-sm" href="#" id="add_detail" ><i class="fa fa-plus-square"></i></a></th>
                                        </tr>
                                    </thead>
                                    <tbody class="TDETAIL_BODY" id="TDETAIL_BODY">
                                        @if (Model.detaildata != null)
                                        {
                                            if (Model.detaildata.Count != 0)
                                            {
                                                var del_chk = "";
                                                var cnt = 0;
                                                foreach (Production_Release_Order_Detail details in Model.detaildata)
                                                {
                                                    string id = (@details.RODID).ToString();
                                                    del_chk = ""; //if (@MCPL.Helper.Delete_fun.delete_check1("PURCHASEORDER", id) == "PROCEED") { del_chk = ""; } else { del_chk = "readonly"; }
                                                    cnt = ++cnt;
                                                    <tr class="item-row">
                                                        <td class="hidden">
                                                            <input class="form-control  RODID" id="RODID" name="RODID" value="@details.RODID">
                                                        </td>
                                                        <td class="col-sm-1" style="width:25px"><input type="text" value="@cnt" style="border:none;width:35px" class="TCOUNT" id="TCOUNT" name="TCOUNT" readonly /></td>
                                                        <td class="col-lg-11">
                                                            <input class="form-control PCOLDESC" id="PCOLDESC" name="PCOLDESC" value="@details.PCOLDESC" tabindex="101">
                                                        </td>
                                                        <td><a class="btn btn-danger btn-sm" id="del_detail"> <i class="fa fa-trash-o"></i></a></td>
                                                    </tr>
                                                }
                                            }
                                            else
                                            {

                                                <tr class="item-row">
                                                    <td class="hidden">
                                                        <input class="form-control  RODID" id="RODID" name="RODID" value="0">
                                                    </td>
                                                    <td class="col-sm-1" style="width:25px"><input type="text" style="border:none;width:35px" class="TCOUNT" id="TCOUNT" name="TCOUNT" value="1" readonly /></td>
                                                    <td class="col-lg-11">
                                                        <input class="form-control PCOLDESC" id="PCOLDESC" name="PCOLDESC" tabindex="101">
                                                    </td>
                                                    <td><a class="btn btn-danger btn-sm" id="del_detail"> <i class="fa fa-trash-o"></i></a></td>
                                                </tr>

                                            }
                                        }
                                        else
                                        {
                                            <tr class="item-row">
                                                <td class="hidden">
                                                    <input class="form-control  RODID" id="RODID" name="RODID" value="0">
                                                </td>
                                                <td class="col-sm-1" style="width:25px"><input type="text" style="border:none;width:35px" class="TCOUNT" id="TCOUNT" name="TCOUNT" value="1" readonly /></td>
                                                <td class="col-lg-11">
                                                    <input class="form-control PCOLDESC" id="PCOLDESC" name="PCOLDESC" tabindex="101">
                                                </td>
                                                <td><a class="btn btn-danger btn-sm" id="del_detail"> <i class="fa fa-trash-o"></i></a></td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>

                                <table class='table table-striped table-bordered bootstrap-datatable'>
                                    <tr>
                                        <td class="col-lg-5"><a href='#' id='cfact' class='btn btn-success  btn-sm hide'><i class="fa fa-plus-square "></i>&nbsp; TAX</a>  </td>
                                        <td class="col-lg-1" align="right">  Amount </td>
                                        <td class="col-lg-1" colspan="2">
                                            @Html.TextBoxFor(model => Model.masterdata[0].ROGAMT, new { @class = "form-control  ROGAMT", @id = "ROGAMT" })
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <!-- /.row (nested) -->
                    </div>

                </div>



                <div class="col-md-12 box-footer">
                    <a href="@Url.Action("Index","ProductionReleaseOrder")" class="btn btn-primary pull-left" tabindex="4012">Go Back</a>
                    <input type="submit" name="submit" value="Submit" class="btn btn-success pull-right btn_submit" tabindex="4022" id="save" />
                </div>
                <!-- /.panel-body -->
            </div>

        </form>

        <br />


    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="width:auto;">
    <div class="modal-dialog" style="width:1200px;">
        <div class="modal-content">
            <div id='myModalContent'></div>

        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->

@section Scripts {

    <script>
        $(window).bind("load", function () {
            if ($(".ROID").val() == "")
                $(".ROID").val(0);


            count = 501;
            $('.RODID').each(function (k) {
                // Set tabindex for all input, select, and select2 elements inside #TDETAIL
                $("#TDETAIL :input:not([readonly='readonly']), #TDETAIL select, #TDETAIL .select2-container").attr('tabindex', function () {
                    return count++;
                });
            });
            return false;

        });


        //function test001() {
        //    count = 501;
        //    $('.RODID').each(function (k) {
        //        $("#TDETAIL :input:not([readonly='readonly']),#TDETAIL select,#TDETAIL a,#TDETAIL select2").attr('tabindex', count++);
        //    });
        //}

        function test001() {
            var count = 501;  // Initial tabindex value
            $('.RODID').each(function (k) {
                // Set tabindex for all input, select, and select2 elements inside #TDETAIL
                $("#TDETAIL :input:not([readonly='readonly']), #TDETAIL select, #TDETAIL .select2-container").attr('tabindex', function () {
                    return count++;
                });
            });
        }

        $(function () { //-----date controls-------------
            //$(".datepicker").datepicker({ dateFormat: 'dd/mm/yy', });
            $(".datepicker").datepicker({ dateFormat: 'dd/mm/yy', maxDate: 0, });
            //$('.datetime').datetimepicker({
            //    dateFormat: 'dd/mm/yy',
            //    timeFormat: 'hh:mm'
            //});
            if ($(".ROID").val() == 0) {
                var dt = new Date();
                var month = dt.getMonth() + 1;
                //var date = dt.getDate() + "/" + month + "/" + dt.getFullYear();
                var pad = n => n < 10 ? "0" + n : n;
                var date = pad(dt.getDate()) + "/" + pad(month) + "/" + dt.getFullYear();
                var time = dt.getHours() + ":" + dt.getMinutes() + ":" + dt.getSeconds();
                var datetme = time;
                $(".RODATE").val(date);

                //$('#CLNTID').select2();
                //$('#CLNTID').select2('open'); // Opens the dropdown and sets focus
                //$('#CLNTID').next('.select2-container').css({
                //    'border': '2px solid #ff0000',  // Red border for highlight
                //    'box-shadow': '0 0 5px rgba(255, 0, 0, 0.5)'  // Optional shadow effect
                //});

                var usrname = '@Session["CUSRID"]';
                var emplid = '@Session["EMPLID"]';

                var grpname = '@Session["Group"]';

            }//--------------End---------
            else {
                //insertiontotal();
                //spacetotal();
                total();
                //Currency();
            }
        });


        $(function () {
            var rowcount = $('#TDETAIL tbody tr').length;
            $("#TDETAIL_IDX").val(rowcount);

            $("#add_detail").click(function () {
                if ($("#TDETAIL_IDX").val() != 0) {
                    var $tableBody = $('#TDETAIL').find("tbody"),
                        $trLast = $tableBody.find("tr:last"),
                        $trNew = $trLast.clone();

                    $trLast.after($trNew);

                    // Clear input values
                    $trNew.find("input:text, select").val("");

                    var row_idx = parseInt($("#TDETAIL_IDX").val());
                    $trNew.find(".TCOUNT").val(row_idx + 1);
                    $trNew.find("#RODID").val("0");

                    // Update index
                    $("#TDETAIL_IDX").val(row_idx + 1);
                    $("#TDETAIL_BODY").show();

                    regroup("TDETAIL");
                    test001();
                } else {
                    $('#TDETAIL_IDX').val("1");
                    $("#TDETAIL_BODY").show();
                }

                return false;
            });

            // Initialize select2 for existing rows
            $('.select2').select2({ width: 'resolve' });

            // Initialize datepicker for existing rows
            $('.datepicker').datepicker({ dateFormat: 'dd/mm/yy' });
        });


        function split(val) {//...autocomplete function
            return val.split(/,\s*/)
        }
        function extractLast(term) {
            return split(term).pop()
        }


        function total() {

            TRANNAMT = 0;
            TRANGAMT = 0;

            i = 0;

            DSPACE = 0;
            DRATE = 0;
            TRANDGAMT = 0;
            TRANDNAMT = 0;
            TRANGAMT = 0;


            $('.RODID').each(function () {

                var ckb = true;//$(this).is(':checked');
                var trantid = 0;//$("#TRANTID option:selected").val()
                if (ckb == true)
                {
                    DSPACE = $(".DSPACE")[i].value.trim();
                    if (isNaN(DSPACE) || DSPACE == "") { DSPACE = 0; $(".DSPACE")[i].value = 0 }
                    else
                        DSPACE = eval(DSPACE).toFixed(2);

                    $(".DSPACE")[i].value = DSPACE;
                    //alert(DSPACE);

                    DRATE = $(".DRATE")[i].value.trim();
                    $(".DRATE")[i].value = DRATE;
                    if (isNaN(DRATE) || DRATE == "") { DRATE = 0; $(".DRATE")[i].value = 0 }
                    else
                        DRATE = eval(DRATE).toFixed(2);

                    $(".DRATE")[i].value = DRATE;

                    TRANDGAMT = eval(DRATE * DSPACE).toFixed(2);

                    //alert(RATE);
                    //alert(TRANDGAMT);
                    $(".GAMT")[i].value = TRANDGAMT;//eval(TRANDRATE * TRANDQTY).toFixed(2);


                    //TRANDNAMT = parseFloat(ATRANDNAMT) + parseFloat(TRANDCGSTAMT) + parseFloat(TRANDSGSTAMT) + parseFloat(TRANDIGSTAMT);// + TRANDCGSTAMT + TRANDSGSTAMT + TRANDIGSTAMT)).toFixed(2);
                    //TRANDNAMT = eval(TRANDNAMT).toFixed(2);
                    //$(".CORDDNAMT")[i].value = TRANDNAMT;

                    TRANGAMT += eval($(".GAMT")[i].value);
                    //TRANCGSTAMT = (eval(TRANCGSTAMT) + eval(TRANDCGSTAMT)).toFixed(2);
                    //TRANSGSTAMT = (eval(TRANSGSTAMT) + eval(TRANDSGSTAMT)).toFixed(2);
                    //TRANIGSTAMT = (eval(TRANIGSTAMT) + eval(TRANDIGSTAMT)).toFixed(2);
                }
                else
                {
                    $(".GAMT")[i].value = 0.00; if (isNaN(TRANGAMT)) TRANGAMT = "0";
                    TRANGAMT = TRANGAMT + parseFloat($(".GAMT")[i].value);

                    //$(".F_IBPODAIDS")[i].value = false;
                }


                i++;
            });


            $(".GROSSAMT").val(TRANGAMT.toFixed(2));
            TRANGAMT = $("#GROSSAMT").val();

            TRANNAMT = (eval(TRANGAMT).toFixed(2));// + eval(TRANCGSTAMT) + eval(TRANSGSTAMT) + eval(TRANIGSTAMT) + eval(CF_ROW_TOTAL)).toFixed(2);
            if (isNaN(TRANNAMT))
                TRANNAMT = 0;
            $("#NETTAMT").val(TRANNAMT);
        }

        $(document).on("click", "#del_detail", function () {
            var r = confirm("Are you sure to delete this record ?");
            if (r == true) {
                row = this.parentNode.parentNode.rowIndex;
                row = row - 1;
                var $tableBody = $('#TDETAIL').find("tbody")

                $trCur = $tableBody.find("tr:eq(" + row + ")");
                var det_id = $trCur.find(".RODID").val();

                idx = $("#TDETAIL_IDX").val();
                if (det_id != 0)
                {

                    base = window.location.origin;
                    $.post(base + "/ProductionReleaseOrder/Del_det",
                                 {
                                     id: det_id, fld: "PRODUCTIONRELEASEORDERDETAIL"
                                 },
                               function (data, status) {
                                   alert(data);

                                   if (data == "Deleted Successfully ...") {
                                       if (idx == 1) {
                                           //alert("a");
                                           var $tableBody = $('#TDETAIL').find("tbody")
                                           $trCur = $tableBody.find("tr:eq(0)");
                                           $trCur.find("input:text,select").val("");

                                           total();
                                       }
                                       else
                                           //alert("b");
                                           //total();
                                           location.reload(window.location.href);
                                        //total();
                                   }
                                   regroup("TDETAIL");
                                   //total();
                               });//---End of post


                }

                else
                {

                    // idx = $("#TDETAIL_IDX").val();
                    if (idx == 1) {

                        var $tableBody = $('#TDETAIL').find("tbody")
                        $trCur = $tableBody.find("tr:eq(0)");
                        $trCur.find("input:text,select").val("");

                        total();
                    }
                    else {
                        $("#TDETAIL_BODY").show();
                        var row = this.parentNode.parentNode;
                        $(this).parents('.item-row').remove();
                        $("#TDETAIL_IDX").val($("#TDETAIL_IDX").val() - 1);
                        total();
                    }
                }

                //total();
            }
            regroup("TDETAIL");
        });


        //...............Amend//
        function pad(input) {
            var BASE = "0000";
            return input ? BASE.substr(0, 4 - Math.ceil(input / 10)) + input : BASE;
        }

        function newpad(input) {
            var BASE = "0";
            return input ? BASE.substr(0, 4 - Math.ceil(input / 10)) + input : BASE;
        }

        function regroup(tableID) {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;
            var i = 0;
            var j = 0;
            for (j = (i + 1) ; j < rowCount; j++) {
                //alert(i);
                //alert(j);
                document.getElementById(tableID).rows[j].cells[1].innerHTML = j;// + 1;
            }
        }

        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // $& means the whole matched string
        }
        function replaceAll(str, match, replacement) {
            return str.replace(new RegExp(escapeRegExp(match), 'g'), replacement);
        }


    //

    function IsAmount(event) {
        //alert(event);
        var $this = event;
        if ((event.which != 46 || $this.val().indexOf('.') != -1) &&
            ((event.which < 48 || event.which > 57) &&
                (event.which != 0 && event.which != 8))) {
            event.preventDefault();
        }

        var text = event;
        if ((event.which == 46) && (text.indexOf('.') == -1)) {
            setTimeout(function () {
                if ($this.val().substring($this.val().indexOf('.')).length > 3) {
                    $this.val($this.val().substring(0, $this.val().indexOf('.') + 3));
                }
            }, 1);
        }

    }

    function isNumberOnlyKey(evt) {
        evt = (evt) ? evt : window.event;
        var charCode = (evt.which) ? evt.which : evt.keyCode;
        if (charCode > 31 && (charCode < 48 || charCode > 57)) {
            return false;
        }
        return true;
    }

    function ValidateOnlyNameAlpha(evt) {
        evt = (evt) ? evt : window.event;
        var charCode = (evt.which) ? evt.which : evt.keyCode;
        //alert(charCode);
        if ((charCode > 64 && charCode < 91) || (charCode == 46) /*|| (charCode > 47 && charCode < 58)*/ || (charCode > 96 && charCode < 123) || charCode == 8 || charCode == 32 || charCode == 38 || charCode == 45 || charCode == 39) {
            return true;
        }
        return false;
    }

    function ValidateNewCustomerAlpha(evt) {
        evt = (evt) ? evt : window.event;
        var charCode = (evt.which) ? evt.which : evt.keyCode;
        //alert(charCode);
        if ((charCode > 64 && charCode < 91) || (charCode == 46) || (charCode > 47 && charCode < 58) || (charCode > 96 && charCode < 123) || charCode == 8 || charCode == 32 || charCode == 38 || charCode == 45 || charCode == 39) {
            return true;
        }
        return false;
    }

    function ValidateAlpha(e) {
        var regex = new RegExp("^[a-zA-Z \s]+$");
        var str = String.fromCharCode(!e.charCode ? e.which : e.charCode);
        if (regex.test(str)) {
            return true;
        }
        else {
            e.preventDefault();
            //alert('Please Enter Alphabate');
            return false;
        }
    }


    function ValidateAlphaNumeric(evt) {
        evt = (evt) ? evt : window.event;
        var charCode = (evt.which) ? evt.which : evt.keyCode;
        //alert(charCode);
        if ((charCode > 64 && charCode < 91) || (charCode > 47 && charCode < 58) || (charCode > 96 && charCode < 123) || charCode == 8 || charCode == 32) {
            return true;
        }
        return false;
    }

    function checkemail(email) {
        //alert(email);
        if (email != "") {
            //var regex = /^[a-zA-Z0-9\.\_]+\@@{1}[a-zA-Z0-9]+\.\w{2,4}$/;
            //var regex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
            var regex = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
            if (!regex.test(email)) {
                alert('Please Enter the Valid E-Mail ID !!');
                $(".QMEMAILID").focus();
            }
        }
    }

    function emailvalidate(email) {
        var aemail = email.val();// document.getElementById(email).value;
        // alert(aemail);
        //var lblError = document.getElementById("lblError");
        //lblError.innerHTML = "";
        //var expr = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
        var regex = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
        if (!regex.test(aemail)) {
            //lblError.innerHTML = "Invalid email address.";
            //alert("Invalid email address. !!");
            return false;
            //email.value = "";
            //email.focus();
        }
        else {
            return true;
        }
    }


        function ValidateNewCustomerAlpha(evt) {
            evt = (evt) ? evt : window.event;
            var charCode = (evt.which) ? evt.which : evt.keyCode;
            //alert(charCode);
            if ((charCode > 64 && charCode < 91) || (charCode == 46) || (charCode > 47 && charCode < 58) || (charCode > 96 && charCode < 123) || charCode == 8 || charCode == 32 || charCode == 38 || charCode == 45 || charCode == 39) {
                return true;
            }
            return false;
        }

        function ValidateOnlyNameAlpha(evt) {
            evt = (evt) ? evt : window.event;
            var charCode = (evt.which) ? evt.which : evt.keyCode;
            //alert(charCode);
            if ((charCode > 64 && charCode < 91) || (charCode == 46) /*|| (charCode > 47 && charCode < 58)*/ || (charCode > 96 && charCode < 123) || charCode == 8 || charCode == 32 || charCode == 38 || charCode == 45 || charCode == 39) {
                return true;
            }
            return false;
        }

        function checkemail(email) {
            //alert(email);
            if (email != "") {
                //var regex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
                var regex = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
                if (!regex.test(email)) {
                    alert('Please Enter the Valid E-Mail ID !!');
                    $(".QMEMAILID").focus();
                }
            }
        }


        function emailvalidate(email) {
            var aemail = email;// document.getElementById(email).value;
            //alert(aemail);
            //var lblError = document.getElementById("lblError");
            //lblError.innerHTML = "";
            //var expr = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
            var expr = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
            if (!expr.test(aemail)) {
                //lblError.innerHTML = "Invalid email address.";
                //alert("Invalid email address. !!");
                return false;
                //email.value = "";
                //email.focus();
            }
            else {
                return true;
            }
        }

        function isNumber(evt) {
            evt = (evt) ? evt : window.event;
            var charCode = (evt.which) ? evt.which : evt.keyCode;
            if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                return false;
            }
            return true;
        }

        function GetClientDetail()
        {
            var clntid = $("#CLNTID option:selected").val();
            var clntname = $("#CLNTID option:selected").text();
            $(".RONAME").val(clntname);
        }

        function GetSupplierDetail() {
            var suplrid = $("#SUPLRID option:selected").val();
            var suplrname = $("#SUPLRID option:selected").text();
            $(".ROSNAME").val(suplrname);
        }


    function validate() {

        flag = true;

        if ($(".RODATE").val() == "") {
            alert("Please Select the RO Date !!");
            $(".RODATE").val("");
            $(".RODATE").focus();
            flag = false;
            return false;
        }

        var CLNTID = $("#CLNTID option:selected").val();
        if (CLNTID == "" || eval(CLNTID) == 0) {
            alert("Please Select Client Properly !!");
            $(".CLNTID").focus();
            flag = false;
            return false;
        }

        var SUPLRID = $("#SUPLRID option:selected").val();
        if (SUPLRID == "" || eval(SUPLRID) == 0) {
            alert("Please Select Supplier Properly !!");
            $(".SUPLRID").focus();
            flag = false;
            return false;
        }

        var rogamt = $(".ROGAMT").val();
        if (rogamt == "" ) {
            alert("Please Enter RO Amount Properly !!");
            $(".ROGAMT").focus();
            flag = false;
            return false;
        }


        var chkinkbad = 1;

        //

        var inkbad = 0;
        var pstatus = 1;

        //Ink Grid Validation
        if (chkinkbad > 0) {
            //alert("ink");

            $('#TDETAIL :text,#TDETAIL select').each(function () {
                //pstatus = 0;
                //alert(this.id + " : " + this.value);
                switch (this.id) {
                    case "PCOLDESC":
                        if (pstatus == 1) {
                            //if ($.trim(this.value) == "") {
                            //    alert("Please Select the DOR Details Properly !!");
                            //    inkbad++;
                            //    this.focus();
                            //}
                            if (inkbad >= 1) { flag = false; return false; }
                            break;
                        }
                    default:
                        if (pstatus == 1) {
                            //if ($.trim(this.value) == "") inkbad++;
                        }

                }
            });

            //alert(inkbad);
            if (inkbad < 1) {

                //return true;

            }
            else {
                //alert("Please Check the Ink Detail before save");
                //$(".M_ITEMID").focus();
                flag = false;
                return false;
            }
        }


        //alert(flag);
        if (flag == true) {
            //alert("y");
            //document.getElementById('save').disabled = true;
            var r = confirm("Are you sure to submit this record ?");
            if (r == true) {
                //$('#btn_submit').attr('disabled', true);
                $('form').submit(function () {
                    $(':submit').attr('disabled', 'disabled'); //disable on any form submit
                });
                return true;
            } else {
                return false;
            }
        }
        else {
            return false;
        }


    }







//

    </script>



}

